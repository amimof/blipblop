syntax = "proto3";

package services.logs.v1;

import "google/protobuf/empty.proto";
import "google/protobuf/timestamp.proto";

option go_package = "github.com/amimof/blipblop/api/services/logs/v1;logs";

service LogService {
  rpc TailLogs(TailLogRequest) returns (stream LogEntry) {}
  rpc PushLogs(stream LogEntry) returns (google.protobuf.Empty) {}
}

message TailLogRequest {
  string node_id = 1;
  string container_id = 2;
  string session_id = 3;
  bool watch = 4;
  int64 since_seconds = 5;
}

message LogEntry {
  string node_id = 1;
  string container_id = 2;
  string session_id = 3;
  google.protobuf.Timestamp timestamp = 4;
  string line = 5;
  uint64 seq = 6;
}
